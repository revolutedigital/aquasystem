# PRD - Product Requirements Document
## Sistema de Gest√£o para Academia de Nata√ß√£o - Melhorias

**Vers√£o:** 1.0
**Data:** 15 de Outubro de 2025
**Status:** Em Planejamento
**Respons√°vel:** Equipe de Desenvolvimento

---

## üìã √çndice

1. [Resumo Executivo](#resumo-executivo)
2. [Contexto Atual](#contexto-atual)
3. [Objetivos das Melhorias](#objetivos-das-melhorias)
4. [Escopo das Melhorias](#escopo-das-melhorias)
5. [Requisitos Funcionais](#requisitos-funcionais)
6. [Requisitos N√£o-Funcionais](#requisitos-n√£o-funcionais)
7. [Cronograma de Implementa√ß√£o](#cronograma-de-implementa√ß√£o)
8. [M√©tricas de Sucesso](#m√©tricas-de-sucesso)
9. [Riscos e Mitiga√ß√µes](#riscos-e-mitiga√ß√µes)

---

## 1. Resumo Executivo

O sistema de gest√£o para academia de nata√ß√£o est√° **90% funcional**, com backend completo (FastAPI), frontend operacional (Streamlit), banco de dados PostgreSQL e integra√ß√£o WhatsApp via Evolution API. Este PRD documenta as melhorias necess√°rias para alcan√ßar **100% de completude** e evoluir o produto para as vers√µes 2.0 e 3.0.

### Fases de Melhorias

- **Fase 1 (Curto Prazo - 1-2 semanas)**: Completar features pendentes da v1.0
- **Fase 2 (M√©dio Prazo - 1-2 meses)**: Implementar funcionalidades v2.0
- **Fase 3 (Longo Prazo - 3-6 meses)**: Expans√£o para v3.0

---

## 2. Contexto Atual

### 2.1 O Que J√° Funciona ‚úÖ

**Backend (100% completo)**
- 22 endpoints REST (Alunos, Pagamentos, Hor√°rios)
- 4 models SQLAlchemy com relacionamentos
- 13 schemas Pydantic validados
- Integra√ß√£o WhatsApp Evolution API
- Sistema de notifica√ß√µes automatizadas (APScheduler)
- 11 fun√ß√µes utilit√°rias (helpers.py)

**Frontend (70% completo)**
- 5 p√°ginas Streamlit operacionais
- Integra√ß√£o com API backend
- Cards de estat√≠sticas b√°sicas
- CRUDs funcionais (com gaps)

**Infraestrutura (100% completo)**
- Docker Compose orquestrado
- PostgreSQL 15 Alpine
- Volumes persistentes
- Health checks

### 2.2 Gaps Identificados ‚ö†Ô∏è

**Frontend (30% pendente)**
- Valida√ß√µes de telefone brasileiro incompletas
- Falta de gr√°ficos Plotly interativos
- Indicadores visuais b√°sicos (faltam üü¢üü°üî¥)
- Bot√µes WhatsApp n√£o implementados
- Export CSV ausente

**Backend (Pontos de Melhoria)**
- Falta init_db.py com dados de exemplo
- Aus√™ncia de autentica√ß√£o/autoriza√ß√£o
- Sem testes automatizados
- Logging b√°sico

**Documenta√ß√£o**
- README incompleto (falta troubleshooting detalhado)
- Falta docker-compose.test.yml

---

## 3. Objetivos das Melhorias

### 3.1 Objetivos de Neg√≥cio

1. **Aumentar produtividade da academia em 40%** atrav√©s de automa√ß√£o completa
2. **Reduzir inadimpl√™ncia em 30%** com notifica√ß√µes WhatsApp eficientes
3. **Facilitar onboarding de novos usu√°rios** com dados de exemplo e documenta√ß√£o clara
4. **Preparar sistema para escala** (m√∫ltiplas academias)

### 3.2 Objetivos T√©cnicos

1. Alcan√ßar **100% de cobertura de testes** nas funcionalidades cr√≠ticas
2. Implementar **autentica√ß√£o segura** (JWT)
3. Otimizar **performance** (tempo de resposta < 200ms)
4. Garantir **compatibilidade mobile** no frontend

---

## 4. Escopo das Melhorias

### FASE 1: Completude da v1.0 (ALTA PRIORIDADE)

#### 4.1 Frontend - P√°ginas Aprimoradas

**US-F01: P√°gina de Cadastro de Alunos (1_Cadastro_Alunos.py)**

**Descri√ß√£o:** Aprimorar valida√ß√µes e UX da p√°gina de cadastro

**Crit√©rios de Aceita√ß√£o:**
- [ ] Valida√ß√£o de telefone brasileiro em tempo real (10 ou 11 d√≠gitos)
- [ ] Formata√ß√£o autom√°tica: (11) 99999-9999
- [ ] M√°scara de CPF com valida√ß√£o de d√≠gitos verificadores
- [ ] Indicador visual üü¢ para aluno ativo, üî¥ para inativo
- [ ] √çcones üèä para nata√ß√£o, üíß para hidrogin√°stica
- [ ] Bot√£o "Enviar WhatsApp" ao lado do telefone
- [ ] Campo de busca com autocomplete por nome
- [ ] Export da lista de alunos para CSV

**Prot√≥tipo de C√≥digo:**
```python
import re

def validar_telefone_brasileiro(telefone: str) -> bool:
    # Remove caracteres n√£o num√©ricos
    numeros = re.sub(r'\D', '', telefone)
    # Valida se tem 10 ou 11 d√≠gitos
    return len(numeros) in [10, 11]

def formatar_telefone(telefone: str) -> str:
    numeros = re.sub(r'\D', '', telefone)
    if len(numeros) == 11:
        return f"({numeros[:2]}) {numeros[2:7]}-{numeros[7:]}"
    elif len(numeros) == 10:
        return f"({numeros[:2]}) {numeros[2:6]}-{numeros[6:]}"
    return telefone
```

---

**US-F02: P√°gina de Financeiro (2_Financeiro.py)**

**Descri√ß√£o:** Adicionar gr√°ficos interativos e melhorar relat√≥rios

**Crit√©rios de Aceita√ß√£o:**
- [ ] Gr√°fico de barras: Receita mensal dos √∫ltimos 6 meses (Plotly)
- [ ] Gr√°fico de pizza: Distribui√ß√£o por forma de pagamento
- [ ] Gr√°fico de linha: Evolu√ß√£o da taxa de inadimpl√™ncia
- [ ] Cards com KPIs: Receita total, m√©dia por aluno, inadimpl√™ncia %
- [ ] Filtros por per√≠odo (data in√≠cio/fim)
- [ ] Bot√£o "Enviar Cobran√ßa WhatsApp" para cada inadimplente
- [ ] Export de relat√≥rio financeiro em CSV
- [ ] Indicador de status: üü¢ em dia, üü° vence em 3 dias, üî¥ atrasado

**Exemplo de Gr√°fico Plotly:**
```python
import plotly.express as px

def criar_grafico_receita_mensal(dados):
    fig = px.bar(
        dados,
        x='mes',
        y='receita',
        title='Receita Mensal - √öltimos 6 Meses',
        labels={'mes': 'M√™s', 'receita': 'Receita (R$)'},
        color='receita',
        color_continuous_scale='Blues'
    )
    fig.update_layout(showlegend=False)
    return fig
```

---

**US-F03: P√°gina de Grade de Hor√°rios (3_Grade_Horarios.py)**

**Descri√ß√£o:** Melhorar visualiza√ß√£o de capacidade e facilitar matr√≠culas

**Crit√©rios de Aceita√ß√£o:**
- [ ] Indicadores de ocupa√ß√£o: üü¢ < 70%, üü° 70-90%, üî¥ > 90%
- [ ] Visualiza√ß√£o em grid (cards por dia da semana)
- [ ] Drag-and-drop para matricular aluno (opcional)
- [ ] Modal de confirma√ß√£o ao remover aluno
- [ ] Filtro por tipo de aula (nata√ß√£o/hidrogin√°stica)
- [ ] Badge com n√∫mero de vagas restantes
- [ ] Busca de hor√°rios dispon√≠veis por dia/per√≠odo
- [ ] Export da grade completa em CSV

**Layout Proposto:**
```
SEGUNDA-FEIRA
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 08:00 - Nata√ß√£o        üü¢       ‚îÇ
‚îÇ Ocupa√ß√£o: 12/20 (60%)           ‚îÇ
‚îÇ Vagas restantes: 8              ‚îÇ
‚îÇ ‚ñ™ Jo√£o Silva                    ‚îÇ
‚îÇ ‚ñ™ Maria Santos                  ‚îÇ
‚îÇ ... [ver todos]                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

**US-F04: Dashboard (4_Dashboard.py)**

**Descri√ß√£o:** Criar dashboard executivo com m√©tricas em tempo real

**Crit√©rios de Aceita√ß√£o:**
- [ ] 4 m√©tricas principais em st.metric:
  - Total de alunos ativos (com delta % m√™s anterior)
  - Inadimplentes (com delta % m√™s anterior)
  - Receita √∫ltimos 30 dias (com delta % m√™s anterior)
  - Taxa de ocupa√ß√£o m√©dia (com delta % semana anterior)
- [ ] Gr√°fico de linha: Evolu√ß√£o de alunos ativos (6 meses)
- [ ] Gr√°fico de barras empilhadas: Nata√ß√£o vs Hidrogin√°stica por m√™s
- [ ] Tabela Top 5 hor√°rios mais procurados
- [ ] Tabela de pr√≥ximos vencimentos (7 dias)
- [ ] Filtro de per√≠odo para todos os gr√°ficos
- [ ] Auto-refresh a cada 5 minutos

---

#### 4.2 Backend - Dados de Exemplo

**US-B01: Script de Inicializa√ß√£o do Banco (init_db.py)**

**Descri√ß√£o:** Criar script para popular banco com dados realistas

**Crit√©rios de Aceita√ß√£o:**
- [ ] Fun√ß√£o `criar_dados_exemplo()` que cria:
  - 20 alunos (15 nata√ß√£o, 5 hidrogin√°stica)
  - 12 hor√°rios (Segunda a S√°bado, manh√£ e tarde)
  - 60 pagamentos (√∫ltimos 3 meses)
  - 30 matr√≠culas aluno-hor√°rio
- [ ] Dados realistas (nomes brasileiros, telefones v√°lidos, CPFs v√°lidos)
- [ ] Relacionamentos consistentes (pagamentos de alunos existentes)
- [ ] Flag `--reset` para limpar banco antes de popular
- [ ] Execut√°vel via: `python -m app.init_db --seed`
- [ ] Integra√ß√£o com docker-compose (vari√°vel CREATE_SAMPLE_DATA=true)

**Estrutura do Script:**
```python
# backend/app/init_db.py

from app.database import SessionLocal
from app.models import Aluno, Pagamento, Horario, AlunoHorario
from faker import Faker
import random

fake = Faker('pt_BR')

def criar_alunos_exemplo(db, quantidade=20):
    """Cria alunos de exemplo com dados realistas"""
    alunos = []
    for i in range(quantidade):
        aluno = Aluno(
            nome_completo=fake.name(),
            responsavel=fake.name() if random.random() > 0.5 else None,
            tipo_aula=random.choice(['natacao', 'hidroginastica']),
            valor_mensalidade=random.choice([150.00, 180.00, 200.00]),
            dia_vencimento=random.randint(5, 25),
            data_inicio_contrato=fake.date_between(start_date='-1y', end_date='today'),
            ativo=True,
            telefone_whatsapp=fake.phone_number(),
            observacoes=None
        )
        db.add(aluno)
        alunos.append(aluno)
    db.commit()
    return alunos

# ... demais fun√ß√µes
```

---

#### 4.3 Documenta√ß√£o e Valida√ß√£o

**US-D01: Completar README.md**

**Crit√©rios de Aceita√ß√£o:**
- [ ] Se√ß√£o "Troubleshooting" expandida com 10+ problemas comuns
- [ ] Se√ß√£o "Evolution API" com passo-a-passo completo e screenshots
- [ ] Se√ß√£o "FAQ" com 15 perguntas frequentes
- [ ] Exemplos de uso da API com curl completos
- [ ] V√≠deo tutorial (opcional - link para YouTube)
- [ ] Badge de status: build passing, coverage, version

---

**US-D02: Testes Automatizados (docker-compose.test.yml)**

**Crit√©rios de Aceita√ß√£o:**
- [ ] docker-compose.test.yml configurado
- [ ] Testes de integra√ß√£o para os 22 endpoints
- [ ] Testes de models e schemas
- [ ] Cobertura m√≠nima de 80%
- [ ] CI/CD com GitHub Actions (opcional)

**Exemplo de Teste:**
```python
# backend/tests/test_alunos.py

import pytest
from fastapi.testclient import TestClient
from app.main import app

client = TestClient(app)

def test_criar_aluno():
    payload = {
        "nome_completo": "Jo√£o Silva",
        "tipo_aula": "natacao",
        "valor_mensalidade": 150.00,
        "dia_vencimento": 10,
        "data_inicio_contrato": "2025-01-15",
        "telefone_whatsapp": "(11) 99999-9999"
    }
    response = client.post("/api/alunos", json=payload)
    assert response.status_code == 200
    data = response.json()
    assert data["nome_completo"] == "Jo√£o Silva"
    assert data["id"] is not None
```

---

### FASE 2: Funcionalidades v2.0 (M√âDIA PRIORIDADE)

#### 4.4 Autentica√ß√£o e Autoriza√ß√£o

**US-A01: Sistema de Login JWT**

**Descri√ß√£o:** Implementar autentica√ß√£o segura para m√∫ltiplos usu√°rios

**Crit√©rios de Aceita√ß√£o:**
- [ ] Model `User` com campos: id, email, password_hash, role, created_at
- [ ] 3 roles: admin, recepcionista, aluno
- [ ] Endpoint POST /api/auth/login (retorna JWT)
- [ ] Endpoint POST /api/auth/register (apenas admin pode criar users)
- [ ] Endpoint GET /api/auth/me (retorna dados do usu√°rio logado)
- [ ] Middleware de valida√ß√£o de JWT em todas as rotas protegidas
- [ ] Passwords hasheados com bcrypt
- [ ] Token expira em 24h
- [ ] Refresh token (expira em 7 dias)

**Permiss√µes por Role:**
| Funcionalidade | Admin | Recepcionista | Aluno |
|----------------|-------|---------------|-------|
| Criar aluno | ‚úÖ | ‚úÖ | ‚ùå |
| Editar aluno | ‚úÖ | ‚úÖ | ‚ùå (apenas pr√≥prio cadastro) |
| Ver financeiro | ‚úÖ | ‚úÖ | ‚ùå (apenas pr√≥prios pagamentos) |
| Criar hor√°rio | ‚úÖ | ‚ùå | ‚ùå |
| Matricular aluno | ‚úÖ | ‚úÖ | ‚ùå |
| Dashboard completo | ‚úÖ | ‚úÖ | ‚ùå |

**Diagrama de Fluxo:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      POST /login       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Client  ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂  ‚îÇ  Backend ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
     ‚îÇ                                    ‚îÇ
     ‚îÇ        {access_token, refresh}     ‚îÇ
     ‚îÇ‚óÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
     ‚îÇ                                    ‚îÇ
     ‚îÇ   GET /api/alunos                  ‚îÇ
     ‚îÇ   Header: Authorization: Bearer... ‚îÇ
     ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ
     ‚îÇ                                    ‚îÇ
     ‚îÇ        {alunos: [...]}             ‚îÇ
     ‚îÇ‚óÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
```

---

**US-A02: P√°gina de Login no Frontend**

**Crit√©rios de Aceita√ß√£o:**
- [ ] P√°gina `0_Login.py` (primeira da aplica√ß√£o)
- [ ] Form com email e password
- [ ] Armazenamento do JWT em `st.session_state`
- [ ] Redirecionamento autom√°tico ap√≥s login
- [ ] Bot√£o "Sair" no sidebar
- [ ] Prote√ß√£o de todas as p√°ginas (verifica se est√° autenticado)
- [ ] Mensagens de erro amig√°veis

---

#### 4.5 Check-in com QR Code

**US-C01: Sistema de Check-in/Check-out**

**Descri√ß√£o:** Permitir registro de presen√ßa dos alunos via QR Code

**Crit√©rios de Aceita√ß√£o:**
- [ ] Model `Presenca` com campos: id, aluno_id, horario_id, data, hora_entrada, hora_saida
- [ ] Endpoint POST /api/checkin (registra entrada)
- [ ] Endpoint POST /api/checkout (registra sa√≠da)
- [ ] Gera√ß√£o de QR Code √∫nico por aluno (v√°lido por 1 hora)
- [ ] P√°gina no frontend para escanear QR Code (usando streamlit-webrtc ou similar)
- [ ] Dashboard com presen√ßa di√°ria por hor√°rio
- [ ] Relat√≥rio de frequ√™ncia mensal por aluno
- [ ] Alerta se aluno n√£o comparece por 7 dias consecutivos

**Fluxo de Uso:**
1. Aluno recebe QR Code por email/WhatsApp ao se matricular
2. Ao chegar na academia, mostra QR Code na recep√ß√£o
3. Recepcionista escaneia QR Code (ou aluno escaneia em totem)
4. Sistema registra entrada com timestamp
5. Ao sair, repete o processo (registra sa√≠da)

**Dados do QR Code:**
```json
{
  "aluno_id": 123,
  "token": "abc123...",
  "expires_at": "2025-10-15T10:00:00"
}
```

---

#### 4.6 Integra√ß√£o com Plataformas de Pagamento

**US-P01: Pagamento Online via Mercado Pago/Stripe**

**Descri√ß√£o:** Permitir pagamento de mensalidades online

**Crit√©rios de Aceita√ß√£o:**
- [ ] Integra√ß√£o com Mercado Pago API ou Stripe API
- [ ] Bot√£o "Pagar Online" no frontend (p√°gina Financeiro)
- [ ] Gera√ß√£o de link de pagamento √∫nico por aluno/m√™s
- [ ] Webhook para receber confirma√ß√£o de pagamento
- [ ] Atualiza√ß√£o autom√°tica de status de pagamento
- [ ] Envio de recibo por email/WhatsApp ap√≥s pagamento
- [ ] Suporte a PIX, cart√£o de cr√©dito, boleto
- [ ] Logs de tentativas de pagamento (sucesso/falha)

**Exemplo de Integra√ß√£o (Mercado Pago):**
```python
import mercadopago

sdk = mercadopago.SDK(os.getenv("MERCADOPAGO_ACCESS_TOKEN"))

def criar_link_pagamento(aluno: Aluno, valor: float, mes_ref: str):
    payment_data = {
        "items": [
            {
                "title": f"Mensalidade {mes_ref} - {aluno.nome_completo}",
                "quantity": 1,
                "currency_id": "BRL",
                "unit_price": float(valor)
            }
        ],
        "payer": {
            "email": aluno.email,
            "phone": {"number": aluno.telefone_whatsapp}
        },
        "back_urls": {
            "success": f"{FRONTEND_URL}/pagamento/sucesso",
            "failure": f"{FRONTEND_URL}/pagamento/falha",
            "pending": f"{FRONTEND_URL}/pagamento/pendente"
        },
        "notification_url": f"{BACKEND_URL}/api/webhooks/mercadopago"
    }

    result = sdk.preference().create(payment_data)
    return result["response"]["init_point"]  # URL para pagamento
```

---

### FASE 3: Expans√£o v3.0 (BAIXA PRIORIDADE - FUTURO)

#### 4.7 App Mobile

**US-M01: Aplicativo React Native ou Flutter**

**Descri√ß√£o:** App mobile para alunos e staff

**Funcionalidades:**
- Login de alunos
- Visualiza√ß√£o de hor√°rios matriculados
- Hist√≥rico de pagamentos
- QR Code para check-in
- Notifica√ß√µes push (lembretes de aula, vencimentos)
- Chat com a academia

---

#### 4.8 Avalia√ß√£o F√≠sica

**US-AF01: Sistema de Avalia√ß√£o F√≠sica**

**Descri√ß√£o:** Registro e acompanhamento de evolu√ß√£o dos alunos

**Crit√©rios de Aceita√ß√£o:**
- [ ] Model `AvaliacaoFisica` com campos: peso, altura, IMC, press√£o, observa√ß√µes
- [ ] Gr√°fico de evolu√ß√£o de peso/IMC ao longo do tempo
- [ ] Metas de sa√∫de por aluno
- [ ] Alertas se aluno n√£o faz avalia√ß√£o h√° 3 meses

---

#### 4.9 Controle de Equipamentos

**US-E01: Gest√£o de Materiais e Equipamentos**

**Descri√ß√£o:** Invent√°rio de equipamentos da piscina

**Crit√©rios de Aceita√ß√£o:**
- [ ] Model `Equipamento`: prancha, macarr√£o, boia, etc
- [ ] Controle de quantidade em estoque
- [ ] Registro de manuten√ß√£o
- [ ] Alertas de reposi√ß√£o

---

#### 4.10 Relat√≥rios em PDF

**US-R01: Exporta√ß√£o de Relat√≥rios PDF**

**Descri√ß√£o:** Gera√ß√£o de relat√≥rios profissionais em PDF

**Tipos de Relat√≥rios:**
- Relat√≥rio financeiro mensal (com gr√°ficos)
- Relat√≥rio de frequ√™ncia por aluno
- Comprovante de pagamento
- Contrato de matr√≠cula

**Biblioteca:** ReportLab ou WeasyPrint

---

## 5. Requisitos Funcionais

### 5.1 Requisitos de Performance

| M√©trica | Objetivo | Medi√ß√£o |
|---------|----------|---------|
| Tempo de resposta API | < 200ms (95th percentile) | New Relic/Prometheus |
| Tempo de carregamento frontend | < 3s | Lighthouse |
| Capacidade de usu√°rios simult√¢neos | 100 usu√°rios | Testes de carga (Locust) |
| Disponibilidade | 99.5% uptime | Monitoramento |

### 5.2 Requisitos de Seguran√ßa

- [ ] HTTPS obrigat√≥rio em produ√ß√£o
- [ ] Passwords hasheados com bcrypt (salt rounds ‚â• 12)
- [ ] JWT com secret forte (256 bits)
- [ ] Rate limiting: 100 req/min por IP
- [ ] Valida√ß√£o de input em todos os endpoints (Pydantic)
- [ ] Logs de a√ß√µes sens√≠veis (cria√ß√£o/exclus√£o de dados)
- [ ] Backup autom√°tico di√°rio do banco de dados

### 5.3 Requisitos de Compatibilidade

- [ ] Navegadores: Chrome 90+, Firefox 88+, Safari 14+, Edge 90+
- [ ] Dispositivos: Desktop, tablet, mobile (responsive)
- [ ] Sistema Operacional (Docker): Linux, macOS, Windows 10+

---

## 6. Requisitos N√£o-Funcionais

### 6.1 Escalabilidade

- Sistema deve suportar at√© 500 alunos por academia
- Preparar arquitetura para multi-tenancy (v3.0)

### 6.2 Manutenibilidade

- Cobertura de testes ‚â• 80%
- Documenta√ß√£o inline (docstrings) em 100% das fun√ß√µes
- Logs estruturados (JSON) para facilitar debug

### 6.3 Usabilidade

- Tempo de onboarding de novo usu√°rio < 10 minutos
- Interface em portugu√™s brasileiro
- Mensagens de erro claras e acion√°veis

---

## 7. Cronograma de Implementa√ß√£o

### Fase 1: Completude v1.0 (2 semanas)

| Task | Esfor√ßo | Respons√°vel | Deadline |
|------|---------|-------------|----------|
| US-F01: P√°gina Cadastro Alunos | 3 dias | Dev Frontend | 18/10/2025 |
| US-F02: P√°gina Financeiro | 3 dias | Dev Frontend | 21/10/2025 |
| US-F03: P√°gina Grade Hor√°rios | 2 dias | Dev Frontend | 23/10/2025 |
| US-F04: Dashboard | 2 dias | Dev Frontend | 25/10/2025 |
| US-B01: Script init_db.py | 1 dia | Dev Backend | 26/10/2025 |
| US-D01: Completar README | 1 dia | Dev Backend | 27/10/2025 |
| US-D02: Testes Automatizados | 2 dias | QA | 29/10/2025 |

**Total:** 14 dias corridos

### Fase 2: Funcionalidades v2.0 (6 semanas)

| Task | Esfor√ßo | Respons√°vel | Deadline |
|------|---------|-------------|----------|
| US-A01: Sistema Login JWT | 5 dias | Dev Backend | 06/11/2025 |
| US-A02: P√°gina Login Frontend | 2 dias | Dev Frontend | 08/11/2025 |
| US-C01: Check-in QR Code | 7 dias | Dev Fullstack | 18/11/2025 |
| US-P01: Pagamento Online | 10 dias | Dev Backend + Integra√ß√£o | 02/12/2025 |

**Total:** 24 dias corridos (6 semanas)

### Fase 3: Expans√£o v3.0 (6 meses)

A definir conforme prioriza√ß√£o de stakeholders.

---

## 8. M√©tricas de Sucesso

### 8.1 KPIs de Produto

| M√©trica | Baseline Atual | Meta Fase 1 | Meta Fase 2 |
|---------|---------------|-------------|-------------|
| Taxa de ado√ß√£o (academias usando) | 1 | 5 | 20 |
| NPS (Net Promoter Score) | N/A | 50 | 70 |
| Tempo m√©dio de cadastro de aluno | 5 min | 2 min | 1 min |
| Redu√ß√£o de inadimpl√™ncia | N/A | 20% | 30% |
| Engajamento (logins/semana) | N/A | 15 | 30 |

### 8.2 KPIs T√©cnicos

| M√©trica | Baseline Atual | Meta Fase 1 | Meta Fase 2 |
|---------|---------------|-------------|-------------|
| Cobertura de testes | 0% | 80% | 90% |
| Bugs cr√≠ticos em produ√ß√£o | N/A | < 2/m√™s | < 1/m√™s |
| Tempo de deploy | Manual | 10 min | 5 min (CI/CD) |
| Uptime | N/A | 99% | 99.9% |

---

## 9. Riscos e Mitiga√ß√µes

### 9.1 Riscos T√©cnicos

| Risco | Probabilidade | Impacto | Mitiga√ß√£o |
|-------|--------------|---------|-----------|
| Integra√ß√£o WhatsApp Evolution API falha | M√©dia | Alto | Implementar fallback para email/SMS |
| Performance degradada com > 500 alunos | Baixa | M√©dio | Testes de carga antecipados, otimiza√ß√£o de queries |
| Seguran√ßa de JWT comprometida | Baixa | Alto | Rota√ß√£o de secrets, testes de penetra√ß√£o |
| Bug em produ√ß√£o afeta faturamento | M√©dia | Alto | Testes E2E completos antes de deploy |

### 9.2 Riscos de Neg√≥cio

| Risco | Probabilidade | Impacto | Mitiga√ß√£o |
|-------|--------------|---------|-----------|
| Academias n√£o adotam sistema | M√©dia | Alto | Pilotos gratuitos, treinamento presencial |
| Concorrentes lan√ßam produto similar | Alta | M√©dio | Acelerar roadmap v2.0, focar em diferenciais |
| Custo de infraestrutura alto | Baixa | M√©dio | Otimizar uso de recursos, planos de pricing |

### 9.3 Riscos de Equipe

| Risco | Probabilidade | Impacto | Mitiga√ß√£o |
|-------|--------------|---------|-----------|
| Desenvolvedor chave sai do projeto | Baixa | Alto | Documenta√ß√£o detalhada, pair programming |
| Escopo creep (aumento de escopo) | Alta | M√©dio | Prioriza√ß√£o rigorosa, sprints fixas |
| Estimativas otimistas | M√©dia | M√©dio | Buffer de 20% em cronograma |

---

## 10. Defini√ß√£o de Pronto (DoD - Definition of Done)

Uma feature s√≥ √© considerada "pronta" quando:

- [ ] C√≥digo implementado e revisado (code review)
- [ ] Testes unit√°rios escritos (cobertura ‚â• 80%)
- [ ] Testes de integra√ß√£o passando
- [ ] Documenta√ß√£o atualizada (README, docstrings)
- [ ] Deploy em ambiente de staging realizado
- [ ] Teste de aceita√ß√£o pelo product owner
- [ ] Sem bugs cr√≠ticos ou bloqueantes

---

## 11. Stakeholders

| Nome | Papel | Responsabilidade | Comunica√ß√£o |
|------|-------|------------------|-------------|
| Dono da Academia | Product Owner | Aprovar features, priorizar roadmap | Reuni√£o semanal |
| Gerente de TI | Tech Lead | Arquitetura, code reviews | Daily standup |
| Desenvolvedor Backend | Backend Engineer | APIs, banco de dados, integra√ß√µes | Slack, GitHub |
| Desenvolvedor Frontend | Frontend Engineer | Streamlit UI, UX | Slack, GitHub |
| QA | Quality Assurance | Testes, valida√ß√£o | Email, Jira |

---

## 12. Anexos

### 12.1 Wireframes (Link para Figma)

*(A ser criado)*

### 12.2 Diagramas de Arquitetura

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                  FRONTEND                   ‚îÇ
‚îÇ          Streamlit (Python 3.11)            ‚îÇ
‚îÇ  5 p√°ginas: Home, Alunos, Financeiro,       ‚îÇ
‚îÇ  Hor√°rios, Dashboard                        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
               ‚îÇ HTTP (REST API)
               ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                  BACKEND                    ‚îÇ
‚îÇ          FastAPI (Python 3.11)              ‚îÇ
‚îÇ  - 22 endpoints REST                        ‚îÇ
‚îÇ  - JWT authentication (v2.0)                ‚îÇ
‚îÇ  - APScheduler (notifica√ß√µes)               ‚îÇ
‚îÇ  - WhatsApp Service (Evolution API)         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
               ‚îÇ SQLAlchemy ORM
               ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                 DATABASE                    ‚îÇ
‚îÇ          PostgreSQL 15 Alpine               ‚îÇ
‚îÇ  4 tabelas: alunos, pagamentos,             ‚îÇ
‚îÇ  horarios, aluno_horario                    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 12.3 Modelo de Dados (ER Diagram)

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   alunos    ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ  pagamentos  ‚îÇ
‚îÇ             ‚îÇ 1     N ‚îÇ              ‚îÇ
‚îÇ id (PK)     ‚îÇ         ‚îÇ id (PK)      ‚îÇ
‚îÇ nome        ‚îÇ         ‚îÇ aluno_id (FK)‚îÇ
‚îÇ telefone    ‚îÇ         ‚îÇ valor        ‚îÇ
‚îÇ tipo_aula   ‚îÇ         ‚îÇ data_pag     ‚îÇ
‚îÇ ...         ‚îÇ         ‚îÇ mes_ref      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
      ‚îÇ
      ‚îÇ M:N
      ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ aluno_horario   ‚îÇ
‚îÇ                 ‚îÇ
‚îÇ id (PK)         ‚îÇ
‚îÇ aluno_id (FK)   ‚îÇ
‚îÇ horario_id (FK) ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
      ‚ñ≤
      ‚îÇ M:N
      ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  horarios   ‚îÇ
‚îÇ             ‚îÇ
‚îÇ id (PK)     ‚îÇ
‚îÇ dia_semana  ‚îÇ
‚îÇ horario     ‚îÇ
‚îÇ capacidade  ‚îÇ
‚îÇ tipo_aula   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## 13. Gloss√°rio

- **Soft Delete**: Marcar registro como inativo em vez de deletar fisicamente
- **JWT**: JSON Web Token, padr√£o de autentica√ß√£o stateless
- **APScheduler**: Biblioteca Python para agendamento de tarefas
- **Evolution API**: API open-source para integra√ß√£o com WhatsApp
- **ORM**: Object-Relational Mapping (SQLAlchemy)
- **NPS**: Net Promoter Score, m√©trica de satisfa√ß√£o do cliente
- **DoD**: Definition of Done, crit√©rios de conclus√£o de uma tarefa

---

## 14. Aprova√ß√µes

| Nome | Cargo | Assinatura | Data |
|------|-------|------------|------|
| [Nome] | Product Owner | ___________ | ___/___/___ |
| [Nome] | Tech Lead | ___________ | ___/___/___ |
| [Nome] | Stakeholder | ___________ | ___/___/___ |

---

**√öltima atualiza√ß√£o:** 15/10/2025
**Vers√£o do documento:** 1.0
**Pr√≥xima revis√£o:** 01/11/2025
